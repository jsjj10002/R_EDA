---
title: "탐색적자료분석 5장 과제"
author: "215083 박재석"
date: "`r Sys.Date()`"
output: html_document
---

준비사항

```{r , message=FALSE}
library(tidyverse)

```

### 5.3.1: diamonds데이터의 변수 의미 탐색.

```{r eval=FALSE, message=FALSE, warning=FALSE}
?diamonds
```

![](diamonds.png){width="527"}

?diamonds를 통해 데이터셋의 설명을 보면 x가 길이, y가 너비, z가 깊이임을 알 수 있다.

### 5.3.3: 0.99캐럿과 1캐럿 다이아몬드 몇 개인가.

```{r}
diamonds %>% 
    count(carat==0.99)
```

```{r}
diamonds %>% 
    count(carat==1)
```

count()를 이용해 0.99캐럿과 1캐럿인 다이아몬드 수를 셌다. 0.99캐럿은 23개, 1캐럿은 1558개이다.

```{r}
diamonds %>% 
    filter(carat<2) %>% 
    ggplot(aes(x=carat)) +
    geom_histogram(binwidth = 0.05)
```

캐럿별 빈도수를 히스토그램으로 나타내면 주기적으로 특정 캐럿의 수만 높은 것을 알 수 있다. 개수 분포 형성의 이유를 예측해보자면, 관념적으로 선호하는 정도의 캐럿이 정해져있어 가공시 일반적으로 선호하는 캐럿에 맞추는게 까닭이지 않을까 예상해볼 수 있다. ( 0.99캐럿보다 1캐럿을 더 선호)

### 5.4.1 히스토그램과 막대그래프 결측값 처리

#### 히스토그램에서 결측값 처리

```{r}
diamonds %>% 
    mutate(y = ifelse(y<3|y>20,NA,y)) %>% 
    ggplot(aes(y)) +
    geom_histogram()
```

다이아몬드 데이터에서 y중에 이상치로 판단되는 값들을 모두 결측치로 대체하고 이를 히스토그램으로 나타냈다. 경고 메세지가 뜨고 자동으로 결측치를 제거해 히스토그램으로 나타낸 것을 알 수 있다.

#### 막대그래프에서 결측치 처리

```{r}
diamonds %>% 
    mutate(cut = ifelse(y<3|y>20,NA,cut)) %>% 
    ggplot() +
    geom_bar(aes(x=cut))
```

y값이 이상치일때 cut변수의 값들을 결측치로 대체하여 이를 막대그래프로 나타내었다. 경고메세지와함께 결측치를 제거하고 표시해준다. 이때 범주의 이름이 나오지 않는다.

```{r}
diamonds %>% 
    mutate(cut = ifelse(cut=="Ideal",NA,cut)) %>% 
    ggplot() +
    geom_bar(aes(x=cut))
```

극단적으로 cut이 "Ideal"인 경우를 모두 결측치로 대체후 막대그래프를 그리면 네 개의 범주가 1, 2, 3, 4 로 표시되어 있음을 알 수 있다. 범주 표현이 안되어 식별에 어려움이 있다.

```         
히스토그램은 연속형 변수의 구간을 나눠 빈도를 세 나타내는 반면, 막대그래프는 각 범주별 빈도를 세 나타낸다. 
연속형 변수에서는 결측값을 무시하고 그래프를 그려도 되지만 범주형 변스에서는 NA가 하나의 범주가 될 수 도 있다. 
ggplot2내에서 NA가 포함된 범주형자료를 팩터로 변환하는 과정에서 NA 때문에 레벨을 누락하게되고, 이로인해 범주 명 대신 숫자로 대체될 수 있다. 범주형 자료에서 NA를 무시하지않고 그 활용성를 고려해 재할당 하는 과정에서 문제가 생기는 것으로 생각된다.  
```

\`\`\`
